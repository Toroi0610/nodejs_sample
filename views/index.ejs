<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
    <ul id="messages"></ul>
    <form id="message_form" action="#">
      <input id="input_msg" autocomplete="off" /><button>Send</button>
    </form>
    <script>
      var socketio = io();
      $(function(){
        $("#message_form").submit(function(){
          socketio.emit("message", $("#input_msg").val());
          $("#input_msg").val("");
          return false;
        });
        socketio.on("message", function(msg){
          $("#messages").append($("<li>").text(msg + " : " + getRandomInt(0, 100)));
        });
      });
    </script>
    <script>
      // private function
      var getRandomInt = function(min, max) {
          min = Math.ceil(min);
          max = Math.floor(max);
          return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
        }
    </script>
  </body>
</html>
